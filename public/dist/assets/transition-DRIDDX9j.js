import{r,n as y,O as fe,K as B,y as _,E as P,l as ee,o as C,G as he,J as me,M as pe,N as be,k as x,L as ne,U as v,Q as ge,i as re,s as Ee,p as Te,e as te}from"./app-C0qFyPzj.js";function Ce(){let e=r.useRef(!1);return y(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function le(e){var n;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((n=e.as)!=null?n:se)!==r.Fragment||v.Children.count(e.children)===1}let j=r.createContext(null);j.displayName="TransitionContext";var we=(e=>(e.Visible="visible",e.Hidden="hidden",e))(we||{});function Re(){let e=r.useContext(j);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function $e(){let e=r.useContext(z);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let z=r.createContext(null);z.displayName="NestingContext";function D(e){return"children"in e?D(e.children):e.current.filter(({el:n})=>n.current!==null).filter(({state:n})=>n==="visible").length>0}function ie(e,n){let l=Ee(e),a=r.useRef([]),w=Ce(),S=Te(),f=C((s,t=P.Hidden)=>{let u=a.current.findIndex(({el:i})=>i===s);u!==-1&&(te(t,{[P.Unmount](){a.current.splice(u,1)},[P.Hidden](){a.current[u].state="hidden"}}),S.microTask(()=>{var i;!D(a)&&w.current&&((i=l.current)==null||i.call(l))}))}),R=C(s=>{let t=a.current.find(({el:u})=>u===s);return t?t.state!=="visible"&&(t.state="visible"):a.current.push({el:s,state:"visible"}),()=>f(s,P.Unmount)}),p=r.useRef([]),d=r.useRef(Promise.resolve()),h=r.useRef({enter:[],leave:[]}),b=C((s,t,u)=>{p.current.splice(0),n&&(n.chains.current[t]=n.chains.current[t].filter(([i])=>i!==s)),n==null||n.chains.current[t].push([s,new Promise(i=>{p.current.push(i)})]),n==null||n.chains.current[t].push([s,new Promise(i=>{Promise.all(h.current[t].map(([$,H])=>H)).then(()=>i())})]),t==="enter"?d.current=d.current.then(()=>n==null?void 0:n.wait.current).then(()=>u(t)):u(t)}),g=C((s,t,u)=>{Promise.all(h.current[t].splice(0).map(([i,$])=>$)).then(()=>{var i;(i=p.current.shift())==null||i()}).then(()=>u(t))});return r.useMemo(()=>({children:a,register:R,unregister:f,onStart:b,onStop:g,wait:d,chains:h}),[R,f,a,b,g,h,d])}let se=r.Fragment,ue=fe.RenderStrategy;function Fe(e,n){var l,a;let{transition:w=!0,beforeEnter:S,afterEnter:f,beforeLeave:R,afterLeave:p,enter:d,enterFrom:h,enterTo:b,entered:g,leave:s,leaveFrom:t,leaveTo:u,...i}=e,[$,H]=r.useState(null),o=r.useRef(null),E=le(e),F=_(...E?[o,n,H]:n===null?[]:[n]),J=(l=i.unmount)==null||l?P.Unmount:P.Hidden,{show:m,appear:V,initial:W}=Re(),[T,I]=r.useState(m?"visible":"hidden"),X=$e(),{register:O,unregister:A}=X;y(()=>O(o),[O,o]),y(()=>{if(J===P.Hidden&&o.current){if(m&&T!=="visible"){I("visible");return}return te(T,{hidden:()=>A(o),visible:()=>O(o)})}},[T,o,O,A,m,J]);let k=ee();y(()=>{if(E&&k&&T==="visible"&&o.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[o,T,k,E]);let oe=W&&!V,Y=V&&m&&W,G=r.useRef(!1),U=ie(()=>{G.current||(I("hidden"),A(o))},X),Z=C(K=>{G.current=!0;let M=K?"enter":"leave";U.onStart(o,M,N=>{N==="enter"?S==null||S():N==="leave"&&(R==null||R())})}),q=C(K=>{let M=K?"enter":"leave";G.current=!1,U.onStop(o,M,N=>{N==="enter"?f==null||f():N==="leave"&&(p==null||p())}),M==="leave"&&!D(U)&&(I("hidden"),A(o))});r.useEffect(()=>{E&&w||(Z(m),q(m))},[m,E,w]);let ce=!(!w||!E||!k||oe),[,c]=he(ce,$,m,{start:Z,end:q}),de=me({ref:F,className:((a=pe(i.className,Y&&d,Y&&h,c.enter&&d,c.enter&&c.closed&&h,c.enter&&!c.closed&&b,c.leave&&s,c.leave&&!c.closed&&t,c.leave&&c.closed&&u,!c.transition&&m&&g))==null?void 0:a.trim())||void 0,...be(c)}),L=0;T==="visible"&&(L|=x.Open),T==="hidden"&&(L|=x.Closed),c.enter&&(L|=x.Opening),c.leave&&(L|=x.Closing);let ve=ne();return v.createElement(z.Provider,{value:U},v.createElement(ge,{value:L},ve({ourProps:de,theirProps:i,defaultTag:se,features:ue,visible:T==="visible",name:"Transition.Child"})))}function Pe(e,n){let{show:l,appear:a=!1,unmount:w=!0,...S}=e,f=r.useRef(null),R=le(e),p=_(...R?[f,n]:n===null?[]:[n]);ee();let d=re();if(l===void 0&&d!==null&&(l=(d&x.Open)===x.Open),l===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,b]=r.useState(l?"visible":"hidden"),g=ie(()=>{l||b("hidden")}),[s,t]=r.useState(!0),u=r.useRef([l]);y(()=>{s!==!1&&u.current[u.current.length-1]!==l&&(u.current.push(l),t(!1))},[u,l]);let i=r.useMemo(()=>({show:l,appear:a,initial:s}),[l,a,s]);y(()=>{l?b("visible"):!D(g)&&f.current!==null&&b("hidden")},[l,g]);let $={unmount:w},H=C(()=>{var F;s&&t(!1),(F=e.beforeEnter)==null||F.call(e)}),o=C(()=>{var F;s&&t(!1),(F=e.beforeLeave)==null||F.call(e)}),E=ne();return v.createElement(z.Provider,{value:g},v.createElement(j.Provider,{value:i},E({ourProps:{...$,as:r.Fragment,children:v.createElement(ae,{ref:p,...$,...S,beforeEnter:H,beforeLeave:o})},theirProps:{},defaultTag:r.Fragment,features:ue,visible:h==="visible",name:"Transition"})))}function Se(e,n){let l=r.useContext(j)!==null,a=re()!==null;return v.createElement(v.Fragment,null,!l&&a?v.createElement(Q,{ref:n,...e}):v.createElement(ae,{ref:n,...e}))}let Q=B(Pe),ae=B(Fe),xe=B(Se),He=Object.assign(Q,{Child:xe,Root:Q});export{xe as F,Ce as f,He as z};
